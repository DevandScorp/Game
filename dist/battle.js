!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i.r(t);var s=function(){function e(t,i,n,s,r,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pos=i,this.size=n,this.speed="number"==typeof s?s:0,this.frames=r,this.index=0,this.url=t,this.dir=o||"horizontal",this.once=a}var t,i,s;return t=e,(i=[{key:"update",value:function(e){this.index+=this.speed*e}},{key:"render",value:function(e,t){var i;if(this.speed>0){var n=this.frames.length,s=Math.floor(this.index);if(i=this.frames[s%n],this.once&&s>=n)return void(this.done=!0)}else i=0;var r=this.pos[0];r+=i*this.size[0],e.drawImage(t.get(this.url),r,this.pos[1],this.size[0],this.size[1],0,0,this.size[0],this.size[1])}}])&&n(t.prototype,i),s&&n(t,s),e}();function r(e){var t=new(window.AudioContext||window.webkitAudioContext),i=t.createBufferSource();fetch(e).then(function(e){return e.arrayBuffer()}).then(function(e){t.decodeAudioData(e,function(e){i.buffer=e,i.connect(t.destination)})}).then(function(){return i.start(0)}).catch(function(e){return console.log(e)})}function o(e,t){e.style.width="".concat(t/2,"%"),e.innerHTML="".concat(1*t,"%")}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resources=n,this.canvas=t,this.ctx=i,this.bulletSpeed=500,this.bullets=[],this.enemy=e.getEnemySprites(),this.isDamaged=!1,this.isHealed=!1,this.player={sprite:new s("img/knight.png",[0,0],[256,256],10,[0,1,2,3,4,5,6])},this.player.pos=[25,this.canvas.height/2-this.player.sprite.size[0]/2],this.damage={pos:[25,this.canvas.height/2-this.player.sprite.size[0]/2],sprite:new s("img/explosion.png",[0,0],[256,256],15,[0,1,2,3,4,5,6])},this.heal={pos:[25,this.canvas.height/2-this.player.sprite.size[0]/2],sprite:new s("img/heal.png",[0,0],[256,256],10,[0,1,2,3,4,5,6])},this.orkHealth=100,this.heroHealth=100,this.heroClassElement=document.querySelector(".heroLife"),this.orkClassElement=document.querySelector(".orkLife")}var t,i,n;return t=e,n=[{key:"getEnemySprites",value:function(){var t={pos:[0,0],sprite:new s("img/orkSprite.png",[220*e.getRandomInt(0,3),935],[220,240])},i={pos:[0,0],sprite:new s("img/orkSprite.png",[85*e.getRandomInt(0,3),0],[85,120])},n={pos:[0,0],sprite:new s("img/orkSprite.png",[85*e.getRandomInt(0,3),120],[85,120])},r={pos:[0,0],sprite:new s("img/orkSprite.png",[219*e.getRandomInt(0,3),240],[219,282])},o={pos:[0,0],sprite:new s("img/orkSprite.png",[165*e.getRandomInt(0,3),720],[165,210])};return[n,i,r,t,{pos:[0,0],sprite:new s("img/orkSprite.png",[220*e.getRandomInt(0,3),525],[220,195])},o]}},{key:"getRandomInt",value:function(e,t){return Math.floor(Math.random()*(t-e))+e}}],(i=[{key:"makeShot",value:function(){var e=this,t=this.player.pos[0]+this.player.sprite.size[0]/2,i=this.player.pos[1];this.player.sprite=new s("img/knightAttack.png",[0,0],[256,256],15,[0,1,2,3,4,5]),setTimeout(function(){e.player.sprite=new s("img/knight.png",[0,0],[256,256],10,[0,1,2,3,4,5]),e.bullets.push({pos:[t,i],sprite:new s("img/fire.png",[0,0],[256,256],10,[0,1,2,3,4,5])})},300),r("../game/sounds/iceball.wav")}},{key:"attackHero",value:function(){var e=this;this.heroHealth-=25,console.log(this.heroHealth),o(this.heroClassElement,this.heroHealth),this.isDamaged=!0,this.player.sprite=new s("img/damage.png",[0,0],[256,256],15,[0,1,2,3,4,5]),setTimeout(function(){e.player.sprite=new s("img/knight.png",[0,0],[256,256],10,[0,1,2,3,4,5]),e.isDamaged=!1},300),r("../game/sounds/qubodup-BangShort.ogg")}},{key:"healHero",value:function(){var e=this;100!==this.heroHealth&&(this.heroHealth+=25,o(this.heroClassElement,this.heroHealth),console.log(this.heroHealth)),this.isHealed=!0,setTimeout(function(){e.isHealed=!1},1e3),r("../game/sounds/blessing.ogg")}},{key:"updateEntities",value:function(e){this.player.sprite.update(e),this.enemy.forEach(function(t){return t.sprite.update(e)}),this.heal.sprite.update(e),this.damage.sprite.update(e);for(var t=0;t<this.bullets.length;t+=1)this.bullets[t].pos[0]+=this.bulletSpeed*e,this.bullets[t].sprite.update(e),this.bullets[t].pos[0]>=this.enemy[2].pos[0]&&(this.orkHealth-=25,console.log(this.orkHealth),o(this.orkClassElement,this.orkHealth),this.bullets.splice(t,1),t-=1);this.heroHealth||(alert("Lose"),this.reset()),this.orkHealth||(alert("Win"),this.reset())}},{key:"renderEntity",value:function(e){this.ctx.save(),this.ctx.translate(e.pos[0],e.pos[1]),e.sprite.render(this.ctx,this.resources),this.ctx.restore()}},{key:"render",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderEntity(this.player),this.isDamaged&&this.renderEntity(this.damage),this.isHealed&&this.renderEntity(this.heal),this.renderEntities(this.enemy),this.renderEntities(this.bullets)}},{key:"renderEntities",value:function(e){for(var t=0;t<e.length;t+=1)this.renderEntity(e[t])}},{key:"reset",value:function(){var t;this.heroHealth=100,this.orkHealth=100,this.bullets=[],this.player.pos=[25,this.canvas.height/2-this.player.sprite.size[0]/2],this.damage.pos=[25,this.canvas.height/2-this.player.sprite.size[0]/2],this.heal.pos=[25,this.canvas.height/2-this.player.sprite.size[0]/2],this.enemy.splice(0,this.enemy.length),(t=this.enemy).push.apply(t,a(e.getEnemySprites()));var i=this.enemy[3].sprite.size[0],n=this.enemy[3].sprite.size[1],s=this.canvas.width,r=this.canvas.height;this.orkClassElement.style.width="50%",this.orkClassElement.innerHTML="100%",this.heroClassElement.style.width="50%",this.heroClassElement.innerHTML="100%",this.enemy[3].pos=[s-i-200,r/2-n/2],this.enemy[1].pos=[s-i-180,r/2-n/2+180],this.enemy[0].pos=[s-i-90,r/2-n/2+180],this.enemy[2].pos=[s-i-360,r/2-n/2+20],this.enemy[5].pos=[s-i-45,r/2-n/2+40],this.enemy[4].pos=[s-i-210,r/2-n/2-80]}}])&&h(t.prototype,i),n&&h(t,n),e}(),u={},p=[];function c(){var e=!0;return Object.keys(u).forEach(function(t){u.hasOwnProperty(t)&&!u[t]&&(e=!1)}),e}function d(e){if(u[e])return u[e];var t=new Image;t.onload=function(){u[e]=t,c()&&p.forEach(function(e){e()})},u[e]=!1,t.src=e}var f={load:function(e){e instanceof Array?e.forEach(function(e){d(e)}):d(e)},get:function(e){return u[e]},onReady:function(e){p.push(e)},isReady:c},g=document.createElement("canvas");g.width=window.innerWidth,g.height=window.innerHeight,document.body.appendChild(g);var m=g.getContext("2d"),y=new l(g,m,f),v=0;function w(){var e=Date.now(),t=(e-v)/1e3;y.updateEntities(t),y.render(),v=e,requestAnimationFrame(w)}f.load(["img/heal.png","img/explosion.png","img/damage.png","img/knight.png","img/fire.png","img/knightAttack.png","img/orkSprite.png"]),f.onReady(function(){y.reset(),v=Date.now(),w()}),window.addEventListener("click",function(){y.makeShot()},!1),window.addEventListener("contextmenu",function(e){e.preventDefault(),y.attackHero()},!1),window.addEventListener("keydown",function(e){"Space"===e.code&&y.healHero()},!1)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmVlbi9nYW1lL2pzL3Nwcml0ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyZWVuL2dhbWUvanMvbXVzaWNIYW5kbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9zY3JlZW4vZ2FtZS9qcy9jaGFuZ2VIZWFsdGhCYXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmVlbi9nYW1lL2pzL2ZpZ2h0SW50ZXJmYWNlLmpzIiwid2VicGFjazovLy8uL3NyYy9zY3JlZW4vZ2FtZS9qcy9yZXNvdXJjZUhhbmRsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmVlbi9nYW1lL2pzL2FwcC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlNwcml0ZSIsInVybCIsInBvcyIsInNpemUiLCJzcGVlZCIsImZyYW1lcyIsImRpciIsIm9uY2UiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiaW5kZXgiLCJkdCIsInR4IiwicmVzb3VyY2VzIiwiZnJhbWUiLCJtYXgiLCJsZW5ndGgiLCJpZHgiLCJNYXRoIiwiZmxvb3IiLCJkb25lIiwieCIsImRyYXdJbWFnZSIsIm1ha2VBU291bmQiLCJwYXRoIiwiYXVkaW9DdHgiLCJ3aW5kb3ciLCJBdWRpb0NvbnRleHQiLCJ3ZWJraXRBdWRpb0NvbnRleHQiLCJzb3VyY2UiLCJjcmVhdGVCdWZmZXJTb3VyY2UiLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsImFycmF5QnVmZmVyIiwiYnVmZmVyIiwiZGVjb2RlQXVkaW9EYXRhIiwiZGVjb2RlZERhdGEiLCJjb25uZWN0IiwiZGVzdGluYXRpb24iLCJzdGFydCIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwibW92ZUhlYWx0aCIsIm5wY0VsZW0iLCJzdHlsZSIsIndpZHRoIiwiY29uY2F0IiwiaW5uZXJIVE1MIiwiRmlnaHRJbnRlcmZhY2UiLCJjYW52YXMiLCJjdHgiLCJmaWdodEludGVyZmFjZV9jbGFzc0NhbGxDaGVjayIsImJ1bGxldFNwZWVkIiwiYnVsbGV0cyIsImVuZW15IiwiZ2V0RW5lbXlTcHJpdGVzIiwiaXNEYW1hZ2VkIiwiaXNIZWFsZWQiLCJwbGF5ZXIiLCJzcHJpdGUiLCJoZWlnaHQiLCJkYW1hZ2UiLCJoZWFsIiwib3JrSGVhbHRoIiwiaGVyb0hlYWx0aCIsImhlcm9DbGFzc0VsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJvcmtDbGFzc0VsZW1lbnQiLCJvcmtCb2R5IiwiZ2V0UmFuZG9tSW50IiwibGVmdExlZyIsInJpZ2h0TGVnIiwicmlnaHRIYW5kIiwibGVmdEhhbmQiLCJtaW4iLCJyYW5kb20iLCJfdGhpcyIsInkiLCJzZXRUaW1lb3V0IiwicHVzaCIsIl90aGlzMiIsIl90aGlzMyIsInVwZGF0ZSIsImZvckVhY2giLCJhIiwic3BsaWNlIiwiYWxlcnQiLCJyZXNldCIsImVudGl0eSIsInNhdmUiLCJ0cmFuc2xhdGUiLCJyZW5kZXIiLCJyZXN0b3JlIiwiY2xlYXJSZWN0IiwicmVuZGVyRW50aXR5IiwicmVuZGVyRW50aXRpZXMiLCJsaXN0IiwiX3RoaXMkZW5lbXkiLCJhcHBseSIsIl90b0NvbnN1bWFibGVBcnJheSIsImJvZHlTaXplWCIsImJvZHlTaXplWSIsImNhbnZhc1dpZHRoIiwiY2FudmFzSGVpZ2h0IiwicmVzb3VyY2VDYWNoZSIsInJlYWR5Q2FsbGJhY2tzIiwiaXNSZWFkeSIsInJlYWR5Iiwia2V5cyIsImsiLCJsb2FkVVJMIiwiaW1nIiwiSW1hZ2UiLCJvbmxvYWQiLCJmdW5jIiwic3JjIiwibG9hZCIsInVybE9yQXJyIiwiQXJyYXkiLCJvblJlYWR5IiwiY3JlYXRlRWxlbWVudCIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImdldENvbnRleHQiLCJnYW1lIiwicmVzb3VyY2VIYW5kbGVyIiwibGFzdFRpbWUiLCJtYWluIiwibm93IiwiRGF0ZSIsInVwZGF0ZUVudGl0aWVzIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm1ha2VTaG90IiwiZSIsInByZXZlbnREZWZhdWx0IiwiYXR0YWNrSGVybyIsImNvZGUiLCJoZWFsSGVybyJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLFlBQUEsQ0FBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVB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QmtILEVBQUlJLElBQU10SCxFQXFCWixJQU1lWSxFQU5HLENBQ2hCMkcsS0FuQkYsU0FBY0MsR0FDUkEsYUFBb0JDLE1BQ3RCRCxFQUFTbEMsUUFBUSxTQUFDdEYsR0FDaEJpSCxFQUFRakgsS0FHVmlILEVBQVFPLElBY1Y1SSxJQVRGLFNBQWFvQixHQUNYLE9BQU8yRyxFQUFjM0csSUFTckIwSCxRQU5GLFNBQWlCTCxHQUNmVCxFQUFlMUIsS0FBS21DLElBTXBCUixXQ25ESTFELEVBQVNpQixTQUFTdUQsY0FBYyxVQUN0Q3hFLEVBQU9KLE1BQVF0QixPQUFPbUcsV0FDdEJ6RSxFQUFPVyxPQUFTckMsT0FBT29HLFlBQ3ZCekQsU0FBUzBELEtBQUtDLFlBQVk1RSxHQUUxQixJQUFNQyxFQUFNRCxFQUFPNkUsV0FBVyxNQUN4QkMsRUFBTyxJQUFJL0UsRUFBZUMsRUFBUUMsRUFBSzhFLEdBRXpDQyxFQUFXLEVBQ2YsU0FBU0MsSUFDUCxJQUFNQyxFQUFNQyxLQUFLRCxNQUNYM0gsR0FBTTJILEVBQU1GLEdBQVksSUFDOUJGLEVBQUtNLGVBQWU3SCxHQUNwQnVILEVBQUtuQyxTQUNMcUMsRUFBV0UsRUFDWEcsc0JBQXNCSixHQVF4QkYsRUFBZ0JYLEtBQUssQ0FDbkIsZUFDQSxvQkFDQSxpQkFDQSxpQkFDQSxlQUNBLHVCQUNBLHNCQUVGVyxFQUFnQlIsUUFmaEIsV0FDRU8sRUFBS3ZDLFFBQ0x5QyxFQUFXRyxLQUFLRCxNQUNoQkQsTUFhRjNHLE9BQU9nSCxpQkFBaUIsUUFBUyxXQUMvQlIsRUFBS1MsYUFDSixHQUNIakgsT0FBT2dILGlCQUFpQixjQUFlLFNBQUNFLEdBQ3RDQSxFQUFFQyxpQkFDRlgsRUFBS1ksZUFDSixHQUNIcEgsT0FBT2dILGlCQUFpQixVQUFXLFNBQUNFLEdBQ25CLFVBQVhBLEVBQUVHLE1BQW9CYixFQUFLYyxhQUM5QiIsImZpbGUiOiJiYXR0bGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTcHJpdGUge1xuICBjb25zdHJ1Y3Rvcih1cmwsIHBvcywgc2l6ZSwgc3BlZWQsIGZyYW1lcywgZGlyLCBvbmNlKSB7XG4gICAgdGhpcy5wb3MgPSBwb3M7XG4gICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICB0aGlzLnNwZWVkID0gdHlwZW9mIHNwZWVkID09PSAnbnVtYmVyJyA/IHNwZWVkIDogMDtcbiAgICB0aGlzLmZyYW1lcyA9IGZyYW1lcztcbiAgICB0aGlzLmluZGV4ID0gMDtcbiAgICB0aGlzLnVybCA9IHVybDtcbiAgICB0aGlzLmRpciA9IGRpciB8fCAnaG9yaXpvbnRhbCc7XG4gICAgdGhpcy5vbmNlID0gb25jZTtcbiAgfVxuXG4gIHVwZGF0ZShkdCkge1xuICAgIHRoaXMuaW5kZXggKz0gdGhpcy5zcGVlZCAqIGR0O1xuICB9XG5cbiAgcmVuZGVyKHR4LCByZXNvdXJjZXMpIHtcbiAgICBsZXQgZnJhbWU7XG5cbiAgICBpZiAodGhpcy5zcGVlZCA+IDApIHtcbiAgICAgIGNvbnN0IG1heCA9IHRoaXMuZnJhbWVzLmxlbmd0aDtcbiAgICAgIGNvbnN0IGlkeCA9IE1hdGguZmxvb3IodGhpcy5pbmRleCk7XG4gICAgICBmcmFtZSA9IHRoaXMuZnJhbWVzW2lkeCAlIG1heF07XG5cbiAgICAgIGlmICh0aGlzLm9uY2UgJiYgaWR4ID49IG1heCkge1xuICAgICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZyYW1lID0gMDtcbiAgICB9XG4gICAgbGV0IHggPSB0aGlzLnBvc1swXTtcbiAgICB4ICs9IGZyYW1lICogdGhpcy5zaXplWzBdO1xuICAgIHR4LmRyYXdJbWFnZShyZXNvdXJjZXMuZ2V0KHRoaXMudXJsKSxcbiAgICAgIHgsIHRoaXMucG9zWzFdLFxuICAgICAgdGhpcy5zaXplWzBdLCB0aGlzLnNpemVbMV0sXG4gICAgICAwLCAwLFxuICAgICAgdGhpcy5zaXplWzBdLCB0aGlzLnNpemVbMV0pO1xuICB9XG59XG4iLCIvKiogTG9hZCBhbmQgcGxheSBtdXNpYyBmaWxlICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtYWtlQVNvdW5kKHBhdGgpIHtcbiAgY29uc3QgYXVkaW9DdHggPSBuZXcgKHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCkoKTtcbiAgY29uc3Qgc291cmNlID0gYXVkaW9DdHguY3JlYXRlQnVmZmVyU291cmNlKCk7XG4gIGZldGNoKHBhdGgpXG4gICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuYXJyYXlCdWZmZXIoKSlcbiAgICAudGhlbigoYnVmZmVyKSA9PiB7XG4gICAgICBhdWRpb0N0eC5kZWNvZGVBdWRpb0RhdGEoYnVmZmVyLCAoZGVjb2RlZERhdGEpID0+IHtcbiAgICAgICAgc291cmNlLmJ1ZmZlciA9IGRlY29kZWREYXRhO1xuICAgICAgICBzb3VyY2UuY29ubmVjdChhdWRpb0N0eC5kZXN0aW5hdGlvbik7XG4gICAgICB9KTtcbiAgICB9KVxuICAgIC50aGVuKCgpID0+IHNvdXJjZS5zdGFydCgwKSlcbiAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coZXJyb3IpKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1vdmVIZWFsdGgobnBjRWxlbSwgdmFsdWUpIHtcbiAgbnBjRWxlbS5zdHlsZS53aWR0aCA9IGAke3ZhbHVlIC8gMiB9JWA7XG4gIG5wY0VsZW0uaW5uZXJIVE1MID0gYCR7dmFsdWUgKiAxIH0lYDtcbn1cbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1hbGVydCAqL1xuaW1wb3J0IFNwcml0ZSBmcm9tICcuL3Nwcml0ZSc7XG5pbXBvcnQgbWFrZUFTb3VuZCBmcm9tICcuL211c2ljSGFuZGxlcic7XG5pbXBvcnQgbW92ZUhlYWx0aCBmcm9tICcuL2NoYW5nZUhlYWx0aEJhcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpZ2h0SW50ZXJmYWNlIHtcbiAgY29uc3RydWN0b3IoY2FudmFzLCBjdHgsIHJlc291cmNlcykge1xuICAgIHRoaXMucmVzb3VyY2VzID0gcmVzb3VyY2VzO1xuICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xuICAgIHRoaXMuY3R4ID0gY3R4O1xuICAgIHRoaXMuYnVsbGV0U3BlZWQgPSA1MDA7XG4gICAgdGhpcy5idWxsZXRzID0gW107XG4gICAgdGhpcy5lbmVteSA9IEZpZ2h0SW50ZXJmYWNlLmdldEVuZW15U3ByaXRlcygpO1xuICAgIHRoaXMuaXNEYW1hZ2VkID0gZmFsc2U7XG4gICAgdGhpcy5pc0hlYWxlZCA9IGZhbHNlO1xuXG4gICAgdGhpcy5wbGF5ZXIgPSB7XG4gICAgICBzcHJpdGU6IG5ldyBTcHJpdGUoJ2ltZy9rbmlnaHQucG5nJywgWzAsIDBdLCBbMjU2LCAyNTZdLCAxMCwgWzAsIDEsIDIsIDMsIDQsIDUsIDZdKSxcbiAgICB9O1xuICAgIHRoaXMucGxheWVyLnBvcyA9IFsyNSwgdGhpcy5jYW52YXMuaGVpZ2h0IC8gMiAtIHRoaXMucGxheWVyLnNwcml0ZS5zaXplWzBdIC8gMl07XG4gICAgdGhpcy5kYW1hZ2UgPSB7XG4gICAgICBwb3M6IFsyNSwgdGhpcy5jYW52YXMuaGVpZ2h0IC8gMiAtIHRoaXMucGxheWVyLnNwcml0ZS5zaXplWzBdIC8gMl0sXG4gICAgICBzcHJpdGU6IG5ldyBTcHJpdGUoJ2ltZy9leHBsb3Npb24ucG5nJywgWzAsIDBdLCBbMjU2LCAyNTZdLCAxNSwgWzAsIDEsIDIsIDMsIDQsIDUsIDZdKSxcbiAgICB9O1xuICAgIHRoaXMuaGVhbCA9IHtcbiAgICAgIHBvczogWzI1LCB0aGlzLmNhbnZhcy5oZWlnaHQgLyAyIC0gdGhpcy5wbGF5ZXIuc3ByaXRlLnNpemVbMF0gLyAyXSxcbiAgICAgIHNwcml0ZTogbmV3IFNwcml0ZSgnaW1nL2hlYWwucG5nJywgWzAsIDBdLCBbMjU2LCAyNTZdLCAxMCwgWzAsIDEsIDIsIDMsIDQsIDUsIDZdKSxcbiAgICB9O1xuICAgIHRoaXMub3JrSGVhbHRoID0gMTAwO1xuICAgIHRoaXMuaGVyb0hlYWx0aCA9IDEwMDtcbiAgICB0aGlzLmhlcm9DbGFzc0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVyb0xpZmUnKTtcbiAgICB0aGlzLm9ya0NsYXNzRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vcmtMaWZlJyk7XG4gIH1cblxuICBzdGF0aWMgZ2V0RW5lbXlTcHJpdGVzKCkge1xuICAgIGNvbnN0IG9ya1Nwcml0ZUxvY2F0aW9uID0gJ2ltZy9vcmtTcHJpdGUucG5nJztcbiAgICBjb25zdCBvcmtCb2R5ID0ge1xuICAgICAgcG9zOiBbMCwgMF0sXG4gICAgICBzcHJpdGU6XG4gICAgICAgICAgbmV3IFNwcml0ZShvcmtTcHJpdGVMb2NhdGlvbiwgWzIyMCAqIEZpZ2h0SW50ZXJmYWNlLmdldFJhbmRvbUludCgwLCAzKSwgOTM1XSwgWzIyMCwgMjQwXSksXG4gICAgfTtcbiAgICBjb25zdCBsZWZ0TGVnID0ge1xuICAgICAgcG9zOiBbMCwgMF0sXG4gICAgICBzcHJpdGU6XG4gICAgICAgICAgbmV3IFNwcml0ZShvcmtTcHJpdGVMb2NhdGlvbiwgWzg1ICogRmlnaHRJbnRlcmZhY2UuZ2V0UmFuZG9tSW50KDAsIDMpLCAwXSwgWzg1LCAxMjBdKSxcbiAgICB9O1xuICAgIGNvbnN0IHJpZ2h0TGVnID0ge1xuICAgICAgcG9zOiBbMCwgMF0sXG4gICAgICBzcHJpdGU6XG4gICAgICAgICAgbmV3IFNwcml0ZShvcmtTcHJpdGVMb2NhdGlvbiwgWzg1ICogRmlnaHRJbnRlcmZhY2UuZ2V0UmFuZG9tSW50KDAsIDMpLCAxMjBdLCBbODUsIDEyMF0pLFxuICAgIH07XG4gICAgY29uc3QgcmlnaHRIYW5kID0ge1xuICAgICAgcG9zOiBbMCwgMF0sXG4gICAgICBzcHJpdGU6XG4gICAgICAgICAgbmV3IFNwcml0ZShvcmtTcHJpdGVMb2NhdGlvbiwgWzIxOSAqIEZpZ2h0SW50ZXJmYWNlLmdldFJhbmRvbUludCgwLCAzKSwgMjQwXSwgWzIxOSwgMjgyXSksXG4gICAgfTtcbiAgICBjb25zdCBsZWZ0SGFuZCA9IHtcbiAgICAgIHBvczogWzAsIDBdLFxuICAgICAgc3ByaXRlOlxuICAgICAgICAgIG5ldyBTcHJpdGUob3JrU3ByaXRlTG9jYXRpb24sIFsxNjUgKiBGaWdodEludGVyZmFjZS5nZXRSYW5kb21JbnQoMCwgMyksIDcyMF0sIFsxNjUsIDIxMF0pLFxuICAgIH07XG4gICAgY29uc3QgaGVhZCA9IHtcbiAgICAgIHBvczogWzAsIDBdLFxuICAgICAgc3ByaXRlOlxuICAgICAgICAgIG5ldyBTcHJpdGUob3JrU3ByaXRlTG9jYXRpb24sIFsyMjAgKiBGaWdodEludGVyZmFjZS5nZXRSYW5kb21JbnQoMCwgMyksIDUyNV0sIFsyMjAsIDE5NV0pLFxuICAgIH07XG4gICAgcmV0dXJuIFtyaWdodExlZywgbGVmdExlZywgcmlnaHRIYW5kLCBvcmtCb2R5LCBoZWFkLCBsZWZ0SGFuZF07XG4gIH1cblxuICBzdGF0aWMgZ2V0UmFuZG9tSW50KG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pKSArIG1pbjtcbiAgfVxuXG4gIG1ha2VTaG90KCkge1xuICAgIGNvbnN0IHggPSB0aGlzLnBsYXllci5wb3NbMF0gKyB0aGlzLnBsYXllci5zcHJpdGUuc2l6ZVswXSAvIDI7XG4gICAgY29uc3QgeSA9IHRoaXMucGxheWVyLnBvc1sxXTtcblxuICAgIHRoaXMucGxheWVyLnNwcml0ZSA9IG5ldyBTcHJpdGUoJ2ltZy9rbmlnaHRBdHRhY2sucG5nJywgWzAsIDBdLCBbMjU2LCAyNTZdLCAxNSwgWzAsIDEsIDIsIDMsIDQsIDVdKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMucGxheWVyLnNwcml0ZSA9IG5ldyBTcHJpdGUoJ2ltZy9rbmlnaHQucG5nJywgWzAsIDBdLCBbMjU2LCAyNTZdLCAxMCwgWzAsIDEsIDIsIDMsIDQsIDVdKTtcbiAgICAgIHRoaXMuYnVsbGV0cy5wdXNoKHtcbiAgICAgICAgcG9zOiBbeCwgeV0sXG4gICAgICAgIHNwcml0ZTogbmV3IFNwcml0ZSgnaW1nL2ZpcmUucG5nJywgWzAsIDBdLCBbMjU2LCAyNTZdLCAxMCwgWzAsIDEsIDIsIDMsIDQsIDVdKSxcbiAgICAgIH0pO1xuICAgIH0sIDMwMCk7XG4gICAgbWFrZUFTb3VuZCgnLi4vZ2FtZS9zb3VuZHMvaWNlYmFsbC53YXYnKTtcbiAgfVxuXG4gIGF0dGFja0hlcm8oKSB7XG4gICAgdGhpcy5oZXJvSGVhbHRoIC09IDI1O1xuICAgIGNvbnNvbGUubG9nKHRoaXMuaGVyb0hlYWx0aCk7XG4gICAgbW92ZUhlYWx0aCh0aGlzLmhlcm9DbGFzc0VsZW1lbnQsIHRoaXMuaGVyb0hlYWx0aCk7XG4gICAgdGhpcy5pc0RhbWFnZWQgPSB0cnVlO1xuICAgIHRoaXMucGxheWVyLnNwcml0ZSA9IG5ldyBTcHJpdGUoJ2ltZy9kYW1hZ2UucG5nJywgWzAsIDBdLCBbMjU2LCAyNTZdLCAxNSwgWzAsIDEsIDIsIDMsIDQsIDVdKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMucGxheWVyLnNwcml0ZSA9IG5ldyBTcHJpdGUoJ2ltZy9rbmlnaHQucG5nJywgWzAsIDBdLCBbMjU2LCAyNTZdLCAxMCwgWzAsIDEsIDIsIDMsIDQsIDVdKTtcbiAgICAgIHRoaXMuaXNEYW1hZ2VkID0gZmFsc2U7XG4gICAgfSwgMzAwKTtcbiAgICBtYWtlQVNvdW5kKCcuLi9nYW1lL3NvdW5kcy9xdWJvZHVwLUJhbmdTaG9ydC5vZ2cnKTtcbiAgfVxuXG4gIGhlYWxIZXJvKCkge1xuICAgIGlmICh0aGlzLmhlcm9IZWFsdGggIT09IDEwMCkge1xuICAgICAgdGhpcy5oZXJvSGVhbHRoICs9IDI1O1xuICAgICAgbW92ZUhlYWx0aCh0aGlzLmhlcm9DbGFzc0VsZW1lbnQsIHRoaXMuaGVyb0hlYWx0aCk7XG4gICAgICBjb25zb2xlLmxvZyh0aGlzLmhlcm9IZWFsdGgpO1xuICAgIH1cbiAgICB0aGlzLmlzSGVhbGVkID0gdHJ1ZTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuaXNIZWFsZWQgPSBmYWxzZTtcbiAgICB9LCAxMDAwKTtcbiAgICBtYWtlQVNvdW5kKCcuLi9nYW1lL3NvdW5kcy9ibGVzc2luZy5vZ2cnKTtcbiAgfVxuXG4gIHVwZGF0ZUVudGl0aWVzKGR0KSB7XG4gICAgdGhpcy5wbGF5ZXIuc3ByaXRlLnVwZGF0ZShkdCk7XG5cbiAgICB0aGlzLmVuZW15LmZvckVhY2goYSA9PiBhLnNwcml0ZS51cGRhdGUoZHQpKTtcblxuICAgIHRoaXMuaGVhbC5zcHJpdGUudXBkYXRlKGR0KTtcbiAgICB0aGlzLmRhbWFnZS5zcHJpdGUudXBkYXRlKGR0KTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5idWxsZXRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICB0aGlzLmJ1bGxldHNbaV0ucG9zWzBdICs9IHRoaXMuYnVsbGV0U3BlZWQgKiBkdDtcbiAgICAgIHRoaXMuYnVsbGV0c1tpXS5zcHJpdGUudXBkYXRlKGR0KTtcbiAgICAgIGlmICh0aGlzLmJ1bGxldHNbaV0ucG9zWzBdID49IHRoaXMuZW5lbXlbMl0ucG9zWzBdKSB7XG4gICAgICAgIHRoaXMub3JrSGVhbHRoIC09IDI1O1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm9ya0hlYWx0aCk7XG4gICAgICAgIG1vdmVIZWFsdGgodGhpcy5vcmtDbGFzc0VsZW1lbnQsIHRoaXMub3JrSGVhbHRoKTtcbiAgICAgICAgdGhpcy5idWxsZXRzLnNwbGljZShpLCAxKTtcbiAgICAgICAgaSAtPSAxO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXRoaXMuaGVyb0hlYWx0aCkge1xuICAgICAgYWxlcnQoJ0xvc2UnKTtcbiAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLm9ya0hlYWx0aCkge1xuICAgICAgYWxlcnQoJ1dpbicpO1xuICAgICAgdGhpcy5yZXNldCgpO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlckVudGl0eShlbnRpdHkpIHtcbiAgICB0aGlzLmN0eC5zYXZlKCk7XG4gICAgdGhpcy5jdHgudHJhbnNsYXRlKGVudGl0eS5wb3NbMF0sIGVudGl0eS5wb3NbMV0pO1xuICAgIGVudGl0eS5zcHJpdGUucmVuZGVyKHRoaXMuY3R4LCB0aGlzLnJlc291cmNlcyk7XG4gICAgdGhpcy5jdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcbiAgICB0aGlzLnJlbmRlckVudGl0eSh0aGlzLnBsYXllcik7XG4gICAgaWYgKHRoaXMuaXNEYW1hZ2VkKSB7XG4gICAgICB0aGlzLnJlbmRlckVudGl0eSh0aGlzLmRhbWFnZSk7XG4gICAgfVxuICAgIGlmICh0aGlzLmlzSGVhbGVkKSB7XG4gICAgICB0aGlzLnJlbmRlckVudGl0eSh0aGlzLmhlYWwpO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlckVudGl0aWVzKHRoaXMuZW5lbXkpO1xuICAgIHRoaXMucmVuZGVyRW50aXRpZXModGhpcy5idWxsZXRzKTtcbiAgfVxuXG4gIHJlbmRlckVudGl0aWVzKGxpc3QpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIHRoaXMucmVuZGVyRW50aXR5KGxpc3RbaV0pO1xuICAgIH1cbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMuaGVyb0hlYWx0aCA9IDEwMDtcbiAgICB0aGlzLm9ya0hlYWx0aCA9IDEwMDtcblxuICAgIHRoaXMuYnVsbGV0cyA9IFtdO1xuXG4gICAgdGhpcy5wbGF5ZXIucG9zID0gWzI1LCB0aGlzLmNhbnZhcy5oZWlnaHQgLyAyIC0gdGhpcy5wbGF5ZXIuc3ByaXRlLnNpemVbMF0gLyAyXTtcbiAgICB0aGlzLmRhbWFnZS5wb3MgPSBbMjUsIHRoaXMuY2FudmFzLmhlaWdodCAvIDIgLSB0aGlzLnBsYXllci5zcHJpdGUuc2l6ZVswXSAvIDJdO1xuICAgIHRoaXMuaGVhbC5wb3MgPSBbMjUsIHRoaXMuY2FudmFzLmhlaWdodCAvIDIgLSB0aGlzLnBsYXllci5zcHJpdGUuc2l6ZVswXSAvIDJdO1xuXG4gICAgdGhpcy5lbmVteS5zcGxpY2UoMCwgdGhpcy5lbmVteS5sZW5ndGgpO1xuICAgIHRoaXMuZW5lbXkucHVzaCguLi5GaWdodEludGVyZmFjZS5nZXRFbmVteVNwcml0ZXMoKSk7XG5cbiAgICBjb25zdCBib2R5U2l6ZVggPSB0aGlzLmVuZW15WzNdLnNwcml0ZS5zaXplWzBdO1xuICAgIGNvbnN0IGJvZHlTaXplWSA9IHRoaXMuZW5lbXlbM10uc3ByaXRlLnNpemVbMV07XG4gICAgY29uc3QgY2FudmFzV2lkdGggPSB0aGlzLmNhbnZhcy53aWR0aDtcbiAgICBjb25zdCBjYW52YXNIZWlnaHQgPSB0aGlzLmNhbnZhcy5oZWlnaHQ7XG5cbiAgICB0aGlzLm9ya0NsYXNzRWxlbWVudC5zdHlsZS53aWR0aCA9ICc1MCUnO1xuICAgIHRoaXMub3JrQ2xhc3NFbGVtZW50LmlubmVySFRNTCA9ICcxMDAlJztcbiAgICB0aGlzLmhlcm9DbGFzc0VsZW1lbnQuc3R5bGUud2lkdGggPSAnNTAlJztcbiAgICB0aGlzLmhlcm9DbGFzc0VsZW1lbnQuaW5uZXJIVE1MID0gJzEwMCUnO1xuXG4gICAgdGhpcy5lbmVteVszXS5wb3MgPSBbY2FudmFzV2lkdGggLSBib2R5U2l6ZVggLSAyMDAsIGNhbnZhc0hlaWdodCAvIDIgLSBib2R5U2l6ZVkgLyAyXTtcbiAgICB0aGlzLmVuZW15WzFdLnBvcyA9IFtjYW52YXNXaWR0aCAtIGJvZHlTaXplWCAtIDE4MCwgY2FudmFzSGVpZ2h0IC8gMiAtIGJvZHlTaXplWSAvIDIgKyAxODBdO1xuICAgIHRoaXMuZW5lbXlbMF0ucG9zID0gW2NhbnZhc1dpZHRoIC0gYm9keVNpemVYIC0gOTAsIGNhbnZhc0hlaWdodCAvIDIgLSBib2R5U2l6ZVkgLyAyICsgMTgwXTtcbiAgICB0aGlzLmVuZW15WzJdLnBvcyA9IFtjYW52YXNXaWR0aCAtIGJvZHlTaXplWCAtIDM2MCwgY2FudmFzSGVpZ2h0IC8gMiAtIGJvZHlTaXplWSAvIDIgKyAyMF07XG4gICAgdGhpcy5lbmVteVs1XS5wb3MgPSBbY2FudmFzV2lkdGggLSBib2R5U2l6ZVggLSA0NSwgY2FudmFzSGVpZ2h0IC8gMiAtIGJvZHlTaXplWSAvIDIgKyA0MF07XG4gICAgdGhpcy5lbmVteVs0XS5wb3MgPSBbY2FudmFzV2lkdGggLSBib2R5U2l6ZVggLSAyMTAsIGNhbnZhc0hlaWdodCAvIDIgLSBib2R5U2l6ZVkgLyAyIC0gODBdO1xuICB9XG59XG4iLCJcbmNvbnN0IHJlc291cmNlQ2FjaGUgPSB7fTtcbmNvbnN0IHJlYWR5Q2FsbGJhY2tzID0gW107XG5cblxuZnVuY3Rpb24gaXNSZWFkeSgpIHtcbiAgbGV0IHJlYWR5ID0gdHJ1ZTtcbiAgT2JqZWN0LmtleXMocmVzb3VyY2VDYWNoZSkuZm9yRWFjaCgoaykgPT4ge1xuICAgIGlmIChyZXNvdXJjZUNhY2hlLmhhc093blByb3BlcnR5KGspXG4gICAgICAgICAgICAgICYmICFyZXNvdXJjZUNhY2hlW2tdKSB7XG4gICAgICByZWFkeSA9IGZhbHNlO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiByZWFkeTtcbn1cblxuZnVuY3Rpb24gbG9hZFVSTCh1cmwpIHtcbiAgaWYgKHJlc291cmNlQ2FjaGVbdXJsXSkge1xuICAgIHJldHVybiByZXNvdXJjZUNhY2hlW3VybF07XG4gIH1cblxuICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgaW1nLm9ubG9hZCA9ICgpID0+IHtcbiAgICByZXNvdXJjZUNhY2hlW3VybF0gPSBpbWc7XG4gICAgaWYgKGlzUmVhZHkoKSkge1xuICAgICAgcmVhZHlDYWxsYmFja3MuZm9yRWFjaCgoZnVuYykgPT4geyBmdW5jKCk7IH0pO1xuICAgIH1cbiAgfTtcbiAgcmVzb3VyY2VDYWNoZVt1cmxdID0gZmFsc2U7XG4gIGltZy5zcmMgPSB1cmw7XG59XG4vLyBMb2FkIGFuIGltYWdlIHVybCBvciBhbiBhcnJheSBvZiBpbWFnZSB1cmxzXG5mdW5jdGlvbiBsb2FkKHVybE9yQXJyKSB7XG4gIGlmICh1cmxPckFyciBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgdXJsT3JBcnIuZm9yRWFjaCgodXJsKSA9PiB7XG4gICAgICBsb2FkVVJMKHVybCk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgbG9hZFVSTCh1cmxPckFycik7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBnZXQodXJsKSB7XG4gIHJldHVybiByZXNvdXJjZUNhY2hlW3VybF07XG59XG5cbmZ1bmN0aW9uIG9uUmVhZHkoZnVuYykge1xuICByZWFkeUNhbGxiYWNrcy5wdXNoKGZ1bmMpO1xufVxuY29uc3QgcmVzb3VyY2VzID0ge1xuICBsb2FkLFxuICBnZXQsXG4gIG9uUmVhZHksXG4gIGlzUmVhZHksXG59O1xuZXhwb3J0IGRlZmF1bHQgcmVzb3VyY2VzO1xuIiwiaW1wb3J0IEZpZ2h0SW50ZXJmYWNlIGZyb20gJy4vZmlnaHRJbnRlcmZhY2UnO1xuaW1wb3J0IHJlc291cmNlSGFuZGxlciBmcm9tICcuL3Jlc291cmNlSGFuZGxlcic7XG5cbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG5jYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG5jb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbmNvbnN0IGdhbWUgPSBuZXcgRmlnaHRJbnRlcmZhY2UoY2FudmFzLCBjdHgsIHJlc291cmNlSGFuZGxlcik7XG5cbmxldCBsYXN0VGltZSA9IDA7XG5mdW5jdGlvbiBtYWluKCkge1xuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICBjb25zdCBkdCA9IChub3cgLSBsYXN0VGltZSkgLyAxMDAwLjA7XG4gIGdhbWUudXBkYXRlRW50aXRpZXMoZHQpO1xuICBnYW1lLnJlbmRlcigpO1xuICBsYXN0VGltZSA9IG5vdztcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKG1haW4pO1xufVxuZnVuY3Rpb24gaW5pdCgpIHtcbiAgZ2FtZS5yZXNldCgpO1xuICBsYXN0VGltZSA9IERhdGUubm93KCk7XG4gIG1haW4oKTtcbn1cblxucmVzb3VyY2VIYW5kbGVyLmxvYWQoW1xuICAnaW1nL2hlYWwucG5nJyxcbiAgJ2ltZy9leHBsb3Npb24ucG5nJyxcbiAgJ2ltZy9kYW1hZ2UucG5nJyxcbiAgJ2ltZy9rbmlnaHQucG5nJyxcbiAgJ2ltZy9maXJlLnBuZycsXG4gICdpbWcva25pZ2h0QXR0YWNrLnBuZycsXG4gICdpbWcvb3JrU3ByaXRlLnBuZycsXG5dKTtcbnJlc291cmNlSGFuZGxlci5vblJlYWR5KGluaXQpO1xud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBnYW1lLm1ha2VTaG90KCk7XG59LCBmYWxzZSk7XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCAoZSkgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGdhbWUuYXR0YWNrSGVybygpO1xufSwgZmFsc2UpO1xud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICBpZiAoZS5jb2RlID09PSAnU3BhY2UnKSB7IGdhbWUuaGVhbEhlcm8oKTsgfVxufSwgZmFsc2UpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==